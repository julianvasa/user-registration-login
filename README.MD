# User Registration Application

A RESTful API user registration service which is based on the following requirements:
This should be implemented with Java, Spring Boot, using a clear API design and clean code.

The API was developed using Java 8 based on Spring Boot 2.2.0.

## Requires
* Java 8
* Spring Boot
* Thymeleaf
* Spring Security
* Maven

## How to start

    install lombok plugin in the IDE

Once the application is fetched from git it can be built with maven

    mvn clean install
    
This will fetch dependencies and run all tests

To run the app execute:

    mvn package

    java -jar /target/user-registration-1.0.jar

The application will start on the `localhost` and will be listening to the port `8080`

## API Definition

### Table
The user entity

#### Structure
    {
        "id"                    : <number>,
        "firstName"             : <String>,
        "lastName"              : <String>,
        "userName"              : <String>,
        "plainTextPassword"     : <String>,
        "hashedPassword"        : <String>
    }

#### Create a new user

The following creates a new user with `ID` autogenerated

    POST /userservice/register
    {
        "firstName": "first",
        "lastName":  "last",
        "userName":  "username",
        "password":  "12345678"
    }


Example response:

    HTTP 201 CREATED
    POST /userservice/register
    {
        "id": 1155178355,
        "firstName": "first",
        "lastName": "last",
        "userName": "username"
    }

    
#### Create a new user with a username which already exists

Create a user with a username which already exists

    POST /userservice/register
    {
        "firstName": "first",
        "lastName":  "last",
        "userName":  "username",
        "password":  "12345678"
    }

Example response:


    HTTP 409 CONFLICT
    {
        "code": "USER_ALREADY_EXISTS",
        "description": "A user with the given username already exists"
    }


### Create a user with missing input data
    If any error will be thrown by some reason the Error will be returned with details in the body.

Example response:

    HTTP 400 Bad Request
    {
        "timestamp": "2019-11-01T10:32:48.327+0000",
        "status": 400,
        "error": "Bad Request",
        "errors": [
            {
                "codes": [
                    "NotNull.user.firstName",
                    "NotNull.firstName",
                    "NotNull.java.lang.String",
                    "NotNull"
                ],
                "arguments": [
                    {
                        "codes": [
                            "user.firstName",
                            "firstName"
                        ],
                        "arguments": null,
                        "defaultMessage": "firstName",
                        "code": "firstName"
                    }
                ],
                "defaultMessage": "firstname should not be empty",
                "objectName": "user",
                "field": "firstName",
                "rejectedValue": null,
                "bindingFailure": false,
                "code": "NotNull"
            },
            {
                "codes": [
                    "NotBlank.user.firstName",
                    "NotBlank.firstName",
                    "NotBlank.java.lang.String",
                    "NotBlank"
                ],
                "arguments": [
                    {
                        "codes": [
                            "user.firstName",
                            "firstName"
                        ],
                        "arguments": null,
                        "defaultMessage": "firstName",
                        "code": "firstName"
                    }
                ],
                "defaultMessage": "firstname should not be empty",
                "objectName": "user",
                "field": "firstName",
                "rejectedValue": null,
                "bindingFailure": false,
                "code": "NotBlank"
            }
        ],
        "message": "Validation failed for object='user'. Error count: 2",
        "path": "/userservice/register"
    }


